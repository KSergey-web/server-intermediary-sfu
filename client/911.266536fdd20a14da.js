"use strict";(self.webpackChunkhardware_client=self.webpackChunkhardware_client||[]).push([[911],{7911:(_,h,r)=>{r.r(h),r.d(h,{SubgroupsCurrentUserModule:()=>l});var a=r(6895),e=r(5127),d=r(8070),s=r(7579),b=r(2722),t=r(4650),p=r(9442),U=r(9088);function u(g,n){if(1&g){const i=t.EpF();t.TgZ(0,"tr")(1,"th",5),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"fio"),t.qZA(),t.TgZ(8,"td",6)(9,"button",7),t.NdJ("click",function(){const C=t.CHM(i).$implicit,v=t.oxw();return t.KtG(v.toSubgroup(C))}),t._uU(10,"\u041f\u0435\u0440\u0435\u0439\u0442\u0438"),t.qZA()()()}if(2&g){const i=n.$implicit,m=n.index;t.xp6(2),t.Oqu(m+1),t.xp6(2),t.hij(" ",i.name,""),t.xp6(2),t.hij(" ",t.lcZ(7,3,i.creator),"")}}class o{constructor(n,i,m){this.subgroupService=n,this.router=i,this.changeDetector=m,this.onDestroy$=new s.x,this.subgroups=[]}ngOnDestroy(){this.onDestroy$.next(!0),this.onDestroy$.complete()}toSubgroup(n){this.router.navigate([`main-page/subgroup/${n.id}`])}ngOnInit(){this.getSubgroups()}getSubgroups(){this.subgroupService.getSubgroupsByCurrentUser().pipe((0,b.R)(this.onDestroy$)).subscribe({next:this.handleResponseSubroups.bind(this)})}handleResponseSubroups(n){this.subgroups=n,this.changeDetector.detectChanges()}}o.\u0275fac=function(n){return new(n||o)(t.Y36(p.H),t.Y36(e.F0),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:16,vars:1,consts:[[1,"table-responsive"],[1,"table"],["scope","col"],[1,"highlight_tr_hover"],[4,"ngFor","ngForOf"],["scope","row"],["colspan","1",1,"text-right"],[1,"btn","btn-secondary",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"table",1)(2,"caption")(3,"b"),t._uU(4,"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u0434\u0433\u0440\u0443\u043f\u043f"),t.qZA()(),t.TgZ(5,"thead")(6,"tr")(7,"th",2),t._uU(8,"#"),t.qZA(),t.TgZ(9,"th",2),t._uU(10,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),t.qZA(),t.TgZ(11,"th",2),t._uU(12,"\u0421\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044c"),t.qZA(),t._UZ(13,"th"),t.qZA()(),t.TgZ(14,"tbody",3),t.YNc(15,u,11,5,"tr",4),t.qZA()()()),2&n&&(t.xp6(15),t.Q6J("ngForOf",i.subgroups))},dependencies:[a.sg,U.o],changeDetection:0});const c=[{path:"",component:o}];class l{}l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[a.ez,d.N,e.Bz.forChild(c)]})},9442:(_,h,r)=>{r.d(h,{H:()=>p});var a=r(4004),e=r(2389),d=r(4364),s=r(4650),b=r(529),t=r(7556);class p{constructor(u,o,c){this.apiUrl=u,this.http=o,this.authService=c}getSubgroupsByCurrentCreator(u=1){return this.http.get(`${this.apiUrl}/api/subgroups/by-current-creator?pagination[page]=${u}`)}getSubgroups(u=1){return this.http.get(`${this.apiUrl}/api/subgroups?pagination[page]=${u}&`+e.c.serialize+"&"+e.c.populate1lvl+"&"+e.c.additional_name_for_data+"subgroups")}createSubgroup(u){const o={data:{...u,creator:this.authService.currentUser.id}};return o.data.users=u.users?.map(c=>c.id),this.http.post(`${this.apiUrl}/api/subgroups`,o)}getSubgroupById(u){return this.http.get(`${this.apiUrl}/api/subgroups/${u}?populate[0]=users&populate[1]=creator&`+e.c.serialize+"&"+e.c.additional_name_for_data+"subgroup").pipe((0,a.U)(o=>o.subgroup))}getSubgroupsByCurrentUser(){return this.http.get(`${this.apiUrl}/api/subgroups/by-current-user`).pipe((0,a.U)(u=>u.subgroups))}updateSubgroup(u,o){return this.http.put(`${this.apiUrl}/api/subgroups/${o}?`+e.c.serialize,{data:u})}}p.\u0275fac=function(u){return new(u||p)(s.LFG(d.T5),s.LFG(b.eN),s.LFG(t.e))},p.\u0275prov=s.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})},9088:(_,h,r)=>{r.d(h,{o:()=>e});var a=r(4650);class e{transform(s,b){return s?[s.first_name,s.last_name,s.patronymic].join(" "):`user ${s}`}}e.\u0275fac=function(s){return new(s||e)},e.\u0275pipe=a.Yjl({name:"fio",type:e,pure:!0})}}]);