"use strict";(self.webpackChunkhardware_client=self.webpackChunkhardware_client||[]).push([[446],{1446:(M,v,n)=>{n.r(v),n.d(v,{ManagingSubgroupsModule:()=>Z});var t=n(6895),i=n(433),_=n(5127),l=n(5643),T=n(8070),f=n(7579),m=n(2722),h=n(3718),e=n(4650),p=n(9442),b=n(8351);function C(d,r){if(1&d){const s=e.EpF();e.TgZ(0,"app-subgroup-form",6),e.NdJ("onDismiss",function(){e.CHM(s);const S=e.oxw();return e.KtG(S.onDissmis())})("onSubmit",function(S){e.CHM(s);const D=e.oxw();return e.KtG(D.onSubmit(S))}),e.qZA()}if(2&d){const s=e.oxw();e.Q6J("initValuesForForm",s.initValuesForForm)}}class U{constructor(r,s,c){this.subgroupService=r,this.activeModal=s,this.modalService=c,this.onDestroy$=new f.x,this.InitSubgroupForm()}ngOnDestroy(){this.onDestroy$.next(!0),this.onDestroy$.complete()}onDissmis(){this.activeModal.dismiss()}InitSubgroupForm(){this.initValuesForForm={},this.initValuesForForm.acceptButtonText="\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}SomeError(r){console.error(r),new h.p(this.modalService).addHeader("\u041e\u0448\u0438\u0431\u043a\u0430").addText("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a").setDangerStyle().openAlertModal()}onSubmit(r){this.subgroupService.createSubgroup(r).pipe((0,m.R)(this.onDestroy$)).subscribe({next:s=>this.activeModal.close(s),error:s=>{console.log(s),new h.p(this.modalService).addHeader("\u041e\u0448\u0438\u0431\u043a\u0430").addText(`\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0434\u0433\u0440\u0443\u043f\u043f\u0443. \u0421\u0442\u0430\u0442\u0443\u0441 ${s.status}. ${s.message}`).setDangerStyle().openAlertModal()}})}}U.\u0275fac=function(r){return new(r||U)(e.Y36(p.H),e.Y36(l.Kz),e.Y36(l.FF))},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-create-subgroup"]],decls:7,vars:1,consts:[[1,"container"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close","btn-close",3,"click"],["aria-hidden","true"],[3,"initValuesForForm","onDismiss","onSubmit",4,"ngIf"],[3,"initValuesForForm","onDismiss","onSubmit"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0433\u0440\u0443\u043f\u043f\u044b"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return s.onDissmis()}),e._UZ(5,"span",4),e.qZA()(),e.YNc(6,C,1,1,"app-subgroup-form",5),e.qZA()),2&r&&(e.xp6(6),e.Q6J("ngIf",s.initValuesForForm))},dependencies:[t.O5,b.W]});var F=n(9088);function x(d,r){if(1&d){const s=e.EpF();e.TgZ(0,"tr")(1,"th",11),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"fio"),e.qZA(),e.TgZ(8,"td",12)(9,"button",13),e.NdJ("click",function(){const D=e.CHM(s).$implicit,O=e.oxw();return e.KtG(O.toSubgroup(D))}),e._uU(10,"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435"),e.qZA()()()}if(2&d){const s=r.$implicit,c=r.index;e.xp6(2),e.Oqu(c+1),e.xp6(2),e.hij(" ",s.name,""),e.xp6(2),e.hij(" ",e.lcZ(7,3,s.creator),"")}}class E{constructor(r,s,c){this.subgroupService=r,this.modalService=s,this.router=c,this.onDestroy$=new f.x,this.subgroups=[],this.currentPage=1,this.selectedPage=1,this.pageCount=1,this.totalCount=0,this.filterByCurrentCreator=!1}ngOnDestroy(){this.onDestroy$.next(!0),this.onDestroy$.complete()}toSubgroup(r){this.router.navigate([`/main-page/subgroup/${r.id}`])}createSubgroup(){const r=this.modalService.open(U,{size:"lg"});this.performResultModal(r)}ngOnInit(){this.getSubgroups()}onChangePage(){this.selectedPage!=this.currentPage&&(this.currentPage=this.selectedPage,this.getSubgroups())}getSubgroups(){let r;r=this.filterByCurrentCreator?this.subgroupService.getSubgroupsByCurrentCreator.bind(this.subgroupService):this.subgroupService.getSubgroups.bind(this.subgroupService),r().pipe((0,m.R)(this.onDestroy$)).subscribe({next:this.handleResponseSubroups.bind(this)})}handleResponseSubroups(r){this.subgroups=r.subgroups,this.currentPage=r.pagination?.page??1,this.pageCount=r.pagination?.pageCount??1,this.totalCount=r.pagination?.total??0}filterByCreatorCurrentUser(r){this.filterByCurrentCreator=r.target.checked,this.getSubgroups()}performResultModal(r){r.result.then(()=>{this.getSubgroups()})}}E.\u0275fac=function(r){return new(r||E)(e.Y36(p.H),e.Y36(l.FF),e.Y36(_.F0))},E.\u0275cmp=e.Xpm({type:E,selectors:[["app-managing-subgroups"]],decls:24,vars:6,consts:[[1,"btn","btn-primary",3,"click"],[1,"form-check"],["id","filterByCurrentCreator","type","checkbox",1,"form-check-input",3,"change"],["for","filterByCurrentCreator",1,"form-check-label"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"highlight_tr_hover"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"d-inline-block",3,"pageSize","page","maxSize","rotate","boundaryLinks","pageChange"],["scope","row"],["colspan","1",1,"text-right"],[1,"btn","btn-secondary",3,"click"]],template:function(r,s){1&r&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return s.createSubgroup()}),e._uU(1,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0434\u0433\u0440\u0443\u043f\u043f\u0443"),e.qZA(),e.TgZ(2,"div",1)(3,"input",2),e.NdJ("change",function(S){return s.filterByCreatorCurrentUser(S)}),e.qZA(),e.TgZ(4,"label",3),e._uU(5,"\u041e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043d\u043e\u0439 \u043f\u043e\u0434\u0433\u0440\u0443\u043f\u043f\u044b"),e.qZA()(),e.TgZ(6,"div",4)(7,"table",5)(8,"caption")(9,"b"),e._uU(10,"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u0434\u0433\u0440\u0443\u043f\u043f"),e.qZA()(),e.TgZ(11,"thead")(12,"tr")(13,"th",6),e._uU(14,"#"),e.qZA(),e.TgZ(15,"th",6),e._uU(16,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),e.qZA(),e.TgZ(17,"th",6),e._uU(18,"\u0421\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044c"),e.qZA(),e._UZ(19,"th"),e.qZA()(),e.TgZ(20,"tbody",7),e.YNc(21,x,11,5,"tr",8),e.qZA()()(),e.TgZ(22,"div",9)(23,"ngb-pagination",10),e.NdJ("pageChange",function(S){return s.selectedPage=S})("pageChange",function(){return s.onChangePage()}),e.qZA()()),2&r&&(e.xp6(21),e.Q6J("ngForOf",s.subgroups),e.xp6(2),e.Q6J("pageSize",15)("page",s.selectedPage)("maxSize",5)("rotate",!0)("boundaryLinks",!0))},dependencies:[l.N9,t.sg,F.o]});const I=[{path:"",component:E}];class Z{}Z.\u0275fac=function(r){return new(r||Z)},Z.\u0275mod=e.oAB({type:Z}),Z.\u0275inj=e.cJS({imports:[i.u5,i.UX,l.jF,t.ez,l.bz,l.lQ,T.N,l.M,_.Bz.forChild(I)]})},8351:(M,v,n)=>{n.d(v,{W:()=>B});var t=n(4650),i=n(433),_=n(7579),l=n(6895),T=n(9300),f=n(8372),m=n(2722),h=n(3718),e=n(4364),p=n(529),b=n(7556);class C{constructor(o,u,g){this.apiUrl=o,this.http=u,this.authService=g}getUsersByFIO(o){o=o.replace(/\s+/g," ").trim();const[u,g]=o.split(" ");return this.http.get(`${this.apiUrl}/api/users?filters[first_name][$containsi][0]=${u}&sort[0]=first_name%3Aasc`+(g?`&filters[last_name][$containsi][1]=${g}`:""))}}C.\u0275fac=function(o){return new(o||C)(t.LFG(e.T5),t.LFG(p.eN),t.LFG(b.e))},C.\u0275prov=t.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"});var U=n(5643),F=n(9088);function x(a,o){1&a&&(t.TgZ(0,"span"),t._uU(1,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430"),t.qZA())}function E(a,o){if(1&a){const u=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(u),t.oxw();const y=t.MAs(3);return t.KtG(y.toggle())}),t.YNc(1,x,2,0,"span",15),t.qZA()}if(2&a){const u=t.oxw();t.uIk("aria-expanded",!u.isAddUserCollapsed),t.xp6(1),t.Q6J("ngIf",u.isAddUserCollapsed)}}function I(a,o){1&a&&(t.TgZ(0,"li",16),t._uU(1,"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),t.qZA())}function Z(a,o){1&a&&(t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"span",18),t.qZA()())}const d=function(a){return{active:a}};function r(a,o){if(1&a){const u=t.EpF();t.TgZ(0,"li",19),t.NdJ("click",function(){const A=t.CHM(u).$implicit,$=t.oxw();return t.KtG($.selectUser(A))}),t.TgZ(1,"b"),t._uU(2),t.ALo(3,"fio"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"small"),t._uU(6),t.qZA()()}if(2&a){const u=o.$implicit,g=t.oxw();t.Q6J("value",u)("ngClass",t.VKq(6,d,u.id===(null==g.selectedUser?null:g.selectedUser.id))),t.xp6(2),t.Oqu(t.lcZ(3,4,u)),t.xp6(4),t.Oqu(u.email)}}class s{constructor(o,u){this.userService=o,this.modalService=u,this.onDestroy$=new _.x,this.isLoading=!1,this.onAddUser=new t.vpe,this.isAddUserCollapsed=!0,this.fio=new i.NI("",{nonNullable:!0,validators:[i.kI.maxLength(40),i.kI.minLength(1)]}),this.users=[]}ngOnDestroy(){this.onDestroy$.next(!0),this.onDestroy$.complete()}selectUser(o){this.selectedUser=o}clearTempate(){this.users=[],this.selectedUser=void 0,this.fio.setValue("",{emitEvent:!1})}checkSelectedUserInArray(){if(this.selectedUser){for(let o of this.users)if(this.selectedUser?.id===o.id)return;this.selectedUser=void 0}}subOnFioChange(){this.fio.valueChanges.pipe((0,T.h)(this.isNotEmptyFio.bind(this)),(0,f.b)(500),(0,m.R)(this.onDestroy$)).subscribe({next:o=>{this.isLoading=!0,this.userService.getUsersByFIO(o).pipe((0,m.R)(this.onDestroy$)).subscribe(u=>{this.isLoading=!1,this.users=u,this.checkSelectedUserInArray()})},error:o=>{this.isLoading=!1,new h.p(this.modalService).addHeader("\u041e\u0448\u0438\u0431\u043a\u0430").addText(`\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u0421\u0442\u0430\u0442\u0443\u0441 ${o.status}. ${o.message}`).setDangerStyle().openAlertModal()}})}ngOnInit(){this.subOnFioChange()}isNotEmptyFio(){return!!this.fio.value.trim()}addUser(){this.onAddUser.emit(this.selectedUser),this.isAddUserCollapsed=!0,this.clearTempate()}}function c(a,o){if(1&a&&(t.TgZ(0,"div",2)(1,"label",12),t._uU(2,"\u0421\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044c \u043f\u043e\u0434\u0433\u0440\u0443\u043f\u043f\u044b"),t.qZA(),t.TgZ(3,"p",13),t._uU(4),t.ALo(5,"fio"),t.qZA()()),2&a){const u=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,1,u.creator))}}function S(a,o){if(1&a&&(t.TgZ(0,"div",17)(1,"div",18),t._uU(2),t.ALo(3,"fio"),t.qZA(),t._uU(4),t.qZA()),2&a){const u=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,u)),t.xp6(2),t.hij(" ",u.email," ")}}function D(a,o){if(1&a){const u=t.EpF();t.TgZ(0,"li",14),t.YNc(1,S,5,4,"div",15),t.TgZ(2,"button",16),t.NdJ("click",function(){const A=t.CHM(u).$implicit,$=t.oxw();return t.KtG($.deleteUser(A))}),t._uU(3,"\u274c"),t.qZA()()}if(2&a){const u=o.$implicit;t.xp6(1),t.Q6J("ngIf",u)}}function O(a,o){if(1&a){const u=t.EpF();t.TgZ(0,"div",19)(1,"app-add-user",20),t.NdJ("onAddUser",function(y){t.CHM(u);const A=t.oxw();return t.KtG(A.onAddUser(y))}),t.qZA()()}}s.\u0275fac=function(o){return new(o||s)(t.Y36(C),t.Y36(U.FF))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-user"]],outputs:{onAddUser:"onAddUser"},decls:21,vars:7,consts:[["type","button","class","btn btn-outline-primary","aria-controls","collapseExample",3,"click",4,"ngIf"],[3,"ngbCollapse","ngbCollapseChange"],["collapse_list_users","ngbCollapse"],[1,"card"],[1,"card-body"],[1,"form-group"],["for","fio"],["type","text","autocomplete","off","id","fio",3,"formControl"],[1,"list-group","col-10"],["class","text-center",4,"ngIf"],["class","list-group-item list-group-item-action",3,"value","ngClass","click",4,"ngFor","ngForOf"],[1,"pt-2","col","text-center"],["type","button",1,"ml-1","btn","btn-info",3,"disabled","click"],["type","button",1,"ml-1","btn","btn-secondary",3,"click"],["type","button","aria-controls","collapseExample",1,"btn","btn-outline-primary",3,"click"],[4,"ngIf"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"list-group-item","list-group-item-action",3,"value","ngClass","click"]],template:function(o,u){if(1&o){const g=t.EpF();t.TgZ(0,"div"),t.YNc(1,E,2,2,"button",0),t.qZA(),t.TgZ(2,"div",1,2),t.NdJ("ngbCollapseChange",function(A){return u.isAddUserCollapsed=A}),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),t._uU(8,"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u0444\u0430\u043c\u0438\u043b\u0438\u044e, \u0438\u043c\u044f \u043f\u043e\u0441\u043b\u0435 \u0447\u0435\u0433\u043e \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442. "),t._UZ(9,"br"),t._uU(10,"(\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u043e\u043b\u0435 \u043c\u043e\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0443\u0436\u0435 \u0431\u044b\u043b\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0438\u0437 \u0431\u0430\u0437\u044b \u0421\u0424\u0423)"),t.qZA(),t._UZ(11,"input",7),t.qZA(),t.TgZ(12,"ul",8),t.YNc(13,I,2,0,"li",9),t.YNc(14,Z,3,0,"div",9),t.YNc(15,r,7,8,"li",10),t.qZA(),t.TgZ(16,"div",11)(17,"button",12),t.NdJ("click",function(){return u.addUser()}),t._uU(18,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0433\u0440\u0443\u043f\u043f\u0443"),t.qZA(),t.TgZ(19,"button",13),t.NdJ("click",function(){t.CHM(g);const A=t.MAs(3);return t.KtG(A.toggle())}),t._uU(20,"\u041e\u0442\u043c\u0435\u043d\u0430"),t.qZA()()()()()}2&o&&(t.xp6(1),t.Q6J("ngIf",u.isAddUserCollapsed),t.xp6(1),t.Q6J("ngbCollapse",u.isAddUserCollapsed),t.xp6(9),t.Q6J("formControl",u.fio),t.xp6(2),t.Q6J("ngIf",0===u.users.length&&!u.isLoading),t.xp6(1),t.Q6J("ngIf",u.isLoading),t.xp6(1),t.Q6J("ngForOf",u.users),t.xp6(2),t.Q6J("disabled",!u.selectedUser))},dependencies:[i.Fj,i.JJ,i.oH,l.mk,l.sg,l.O5,U._D,F.o],styles:[".high_light_li_hover[_ngcontent-%COMP%]:hover{background-color:#ede3e3}.list-group[_ngcontent-%COMP%]{height:200px;overflow-y:scroll;background-color:beige}"]});class B{constructor(o){this.formBuilder=o,this.users=[],this.acceptButtonText="\u041e\u043a",this.onSubmit=new t.vpe,this.onDestroy$=new _.x,this.initForm()}ngOnInit(){this.setInitValuesToForm()}ngOnDestroy(){this.onDestroy$.next(!0),this.onDestroy$.complete()}initForm(){this.subgroupForm=this.formBuilder.nonNullable.group({name:["",[i.kI.required,i.kI.minLength(2),i.kI.maxLength(40)]]})}isFormInvalid(){return this.subgroupForm.invalid}getDataFromForm(){return{name:this.subgroupForm.controls.name.value,users:this.users}}setInitValuesToForm(){this.subgroupForm.controls.name.setValue(this.initValuesForForm.name??""),this.users=this.initValuesForForm.users??[],this.acceptButtonText=this.initValuesForForm.acceptButtonText??"",this.creator=this.initValuesForForm.creator}onAddUser(o){-1===this.users.findIndex(g=>g.id===o.id)&&(this.users.push(o),this.users=this.users.sort())}deleteUser(o){const u=this.users.indexOf(o);this.users.splice(u,1)}submit(){const o=this.getDataFromForm();this.onSubmit.emit(o)}}B.\u0275fac=function(o){return new(o||B)(t.Y36(i.qu))},B.\u0275cmp=t.Xpm({type:B,selectors:[["app-subgroup-form"]],inputs:{initValuesForForm:"initValuesForForm"},outputs:{onSubmit:"onSubmit"},decls:17,vars:7,consts:[["novalidate","",1,"col",3,"formGroup","ngSubmit"],["class","form-group col-6",4,"ngIf"],[1,"form-group","col-6"],["for","name"],["id","name","name","name","formControlName","name",1,"form-control"],[1,"col-12"],[1,"pl-3","pr-3","list-group","list-group-numbered"],["class","list-group-item d-flex justify-content-between align-items-start",4,"ngFor","ngForOf"],[1,"alert","alert-warning",3,"hidden"],["class","row mt-3",4,"ngIf"],[1,"text-center","mt-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["for","creator"],["id","creator"],[1,"list-group-item","d-flex","justify-content-between","align-items-start"],["class","ms-2 me-auto",4,"ngIf"],[1,"btn","btn-light",3,"click"],[1,"ms-2","me-auto"],[1,"fw-bold"],[1,"row","mt-3"],[3,"onAddUser"]],template:function(o,u){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return u.submit()}),t.YNc(1,c,6,3,"div",1),t.TgZ(2,"div",2)(3,"label",3),t._uU(4,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"div",5)(7,"h6"),t._uU(8,"\u0421\u043e\u0441\u0442\u0430\u0432 \u043f\u043e\u0434\u0433\u0440\u0443\u043f\u043f\u044b:"),t.qZA(),t.TgZ(9,"ol",6),t.YNc(10,D,4,1,"li",7),t.qZA(),t.TgZ(11,"div",8),t._uU(12," \u0421\u043e\u0441\u0442\u0430\u0432 \u043f\u043e\u0434\u0433\u0440\u0443\u043f\u043f\u044b \u043f\u0443\u0441\u0442 "),t.qZA()(),t.YNc(13,O,2,0,"div",9),t.TgZ(14,"div",10)(15,"button",11),t._uU(16),t.qZA()()()),2&o&&(t.Q6J("formGroup",u.subgroupForm),t.xp6(1),t.Q6J("ngIf",u.creator),t.xp6(9),t.Q6J("ngForOf",u.users),t.xp6(1),t.Q6J("hidden",0!=u.users.length),t.xp6(2),t.Q6J("ngIf",u.initValuesForForm.name),t.xp6(2),t.Q6J("disabled",u.isFormInvalid()),t.xp6(1),t.hij(" ",u.acceptButtonText," "))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,l.sg,l.O5,s,F.o]})},9442:(M,v,n)=>{n.d(v,{H:()=>m});var t=n(4004),i=n(2389),_=n(4364),l=n(4650),T=n(529),f=n(7556);class m{constructor(e,p,b){this.apiUrl=e,this.http=p,this.authService=b}getSubgroupsByCurrentCreator(e=1){return this.http.get(`${this.apiUrl}/api/subgroups/by-current-creator?pagination[page]=${e}`)}getSubgroups(e=1){return this.http.get(`${this.apiUrl}/api/subgroups?pagination[page]=${e}&`+i.c.serialize+"&"+i.c.populate1lvl+"&"+i.c.additional_name_for_data+"subgroups")}createSubgroup(e){const p={data:{...e,creator:this.authService.currentUser.id}};return p.data.users=e.users?.map(b=>b.id),this.http.post(`${this.apiUrl}/api/subgroups`,p)}getSubgroupById(e){return this.http.get(`${this.apiUrl}/api/subgroups/${e}?populate[0]=users&populate[1]=creator&`+i.c.serialize+"&"+i.c.additional_name_for_data+"subgroup").pipe((0,t.U)(p=>p.subgroup))}getSubgroupsByCurrentUser(){return this.http.get(`${this.apiUrl}/api/subgroups/by-current-user`).pipe((0,t.U)(e=>e.subgroups))}updateSubgroup(e,p){return this.http.put(`${this.apiUrl}/api/subgroups/${p}?`+i.c.serialize,{data:e})}}m.\u0275fac=function(e){return new(e||m)(l.LFG(_.T5),l.LFG(T.eN),l.LFG(f.e))},m.\u0275prov=l.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})},9088:(M,v,n)=>{n.d(v,{o:()=>i});var t=n(4650);class i{transform(l,T){return l?[l.first_name,l.last_name,l.patronymic].join(" "):`user ${l}`}}i.\u0275fac=function(l){return new(l||i)},i.\u0275pipe=t.Yjl({name:"fio",type:i,pure:!0})},8372:(M,v,n)=>{n.d(v,{b:()=>l});var t=n(4049),i=n(4482),_=n(5403);function l(T,f=t.z){return(0,i.e)((m,h)=>{let e=null,p=null,b=null;const C=()=>{if(e){e.unsubscribe(),e=null;const F=p;p=null,h.next(F)}};function U(){const F=b+T,x=f.now();if(x<F)return e=this.schedule(void 0,F-x),void h.add(e);C()}m.subscribe((0,_.x)(h,F=>{p=F,b=f.now(),e||(e=f.schedule(U,T),h.add(e))},()=>{C(),h.complete()},void 0,()=>{p=e=null}))})}}}]);