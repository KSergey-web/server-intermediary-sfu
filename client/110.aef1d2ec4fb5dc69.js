"use strict";(self.webpackChunkhardware_client=self.webpackChunkhardware_client||[]).push([[110],{9110:(T,d,u)=>{u.r(d),u.d(d,{SessionsOfCurrentUserModule:()=>o});var r=u(6895),c=u(5127),p=u(8070),h=u(7579),m=u(2722),s=u(4650),g=u(7252);function Z(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"tr")(1,"th",5),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.ALo(5,"date"),s.qZA(),s.TgZ(6,"td"),s._uU(7),s.ALo(8,"date"),s.qZA(),s.TgZ(9,"td"),s._uU(10),s.qZA(),s.TgZ(11,"td"),s._uU(12),s.qZA(),s.TgZ(13,"td")(14,"button",6),s.NdJ("click",function(){const U=s.CHM(t).$implicit,A=s.oxw();return s.KtG(A.startSession(U))}),s._uU(15,"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f"),s.qZA()()()}if(2&n){const t=e.$implicit,l=e.index;s.xp6(2),s.Oqu(l+1),s.xp6(2),s.Oqu(s.xi3(5,7,t.begin,"dd.MM.YYYY HH:mm")),s.xp6(3),s.hij(" ",s.xi3(8,10,t.end,"dd.MM.YYYY HH:mm"),""),s.xp6(3),s.lnq(" ",null==t.creator?null:t.creator.first_name," ",null==t.creator?null:t.creator.last_name," ",null==t.creator?null:t.creator.patronymic,""),s.xp6(2),s.hij(" ",null==t.equipment?null:t.equipment.name,"")}}class i{constructor(e){this.router=e,this.sortedSessions=[],this.startedSessions=[]}ngOnChanges(e){this.rebaseStartedSessions()}rebaseStartedSessions(){const e=new Date;for(let t=0;t<this.sortedSessions.length&&!(this.sortedSessions[t].begin>e);++t)this.sortedSessions[t].end>e&&(this.startedSessions.push(this.sortedSessions[t]),this.sortedSessions.splice(t,1),--t)}deleteEndedSessions(){const e=new Date;for(let t=0;t<this.startedSessions.length;++t)this.startedSessions[t].end<e&&(this.startedSessions.splice(t,1),--t)}ngOnInit(){this.timerId=setInterval(()=>{this.deleteEndedSessions(),this.rebaseStartedSessions()},3e4)}ngOnDestroy(){clearInterval(this.timerId)}startSession(e){this.router.navigate(["session",`${e.id}`])}}function S(n,e){if(1&n&&(s.TgZ(0,"tr")(1,"th",6),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.ALo(5,"date"),s.qZA(),s.TgZ(6,"td"),s._uU(7),s.ALo(8,"date"),s.qZA(),s.TgZ(9,"td"),s._uU(10),s.qZA(),s.TgZ(11,"td"),s._uU(12),s.qZA()()),2&n){const t=e.$implicit,l=e.index;s.xp6(2),s.Oqu(l+1),s.xp6(2),s.Oqu(s.xi3(5,7,t.begin,"dd.MM.YYYY HH:mm")),s.xp6(3),s.hij(" ",s.xi3(8,10,t.end,"dd.MM.YYYY HH:mm"),""),s.xp6(3),s.lnq(" ",null==t.creator?null:t.creator.first_name," ",null==t.creator?null:t.creator.last_name," ",null==t.creator?null:t.creator.patronymic,""),s.xp6(2),s.hij(" ",null==t.equipment?null:t.equipment.name,"")}}i.\u0275fac=function(e){return new(e||i)(s.Y36(c.F0))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-started-sessions"]],inputs:{sortedSessions:"sortedSessions"},features:[s.TTD],decls:20,vars:1,consts:[[1,"table-responsive"],[1,"table"],["scope","col"],[1,"highlight_tr_hover"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn","btn-secondary",3,"click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0)(1,"table",1)(2,"caption")(3,"b"),s._uU(4,"\u041d\u0430\u0447\u0430\u0432\u0448\u0438\u0435\u0441\u044f \u0441\u0435\u0430\u043d\u0441\u044b"),s.qZA()(),s.TgZ(5,"thead")(6,"tr")(7,"th",2),s._uU(8,"#"),s.qZA(),s.TgZ(9,"th",2),s._uU(10,"\u041d\u0430\u0447\u0430\u043b\u043e"),s.qZA(),s.TgZ(11,"th",2),s._uU(12,"\u041a\u043e\u043d\u0435\u0446"),s.qZA(),s.TgZ(13,"th",2),s._uU(14,"\u0421\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044c \u0441\u0435\u0441\u0441\u0438\u0438"),s.qZA(),s.TgZ(15,"th",2),s._uU(16,"\u041e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435"),s.qZA(),s._UZ(17,"th",2),s.qZA()(),s.TgZ(18,"tbody",3),s.YNc(19,Z,16,13,"tr",4),s.qZA()()()),2&e&&(s.xp6(19),s.Q6J("ngForOf",t.startedSessions))},dependencies:[r.sg,r.uU],styles:["table[_ngcontent-%COMP%]{background-color:#73e482}"]});class a{constructor(e){this.sessionService=e,this.sessions=[],this.onDestroy$=new h.x}ngOnDestroy(){this.onDestroy$.next(!0),this.onDestroy$.complete()}ngOnInit(){this.sessionService.getSessionsByCurrentUser().pipe((0,m.R)(this.onDestroy$)).subscribe(e=>{this.sessions=e})}}a.\u0275fac=function(e){return new(e||a)(s.Y36(g.m))},a.\u0275cmp=s.Xpm({type:a,selectors:[["app-sessions-of-current-user"]],decls:20,vars:2,consts:[[3,"sortedSessions"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"highlight_tr_hover"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,t){1&e&&(s._UZ(0,"app-started-sessions",0),s.TgZ(1,"div",1)(2,"table",2)(3,"caption")(4,"b"),s._uU(5,"\u0421\u0435\u0430\u043d\u0441\u044b \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u044b"),s.qZA()(),s.TgZ(6,"thead")(7,"tr")(8,"th",3),s._uU(9,"#"),s.qZA(),s.TgZ(10,"th",3),s._uU(11,"\u041d\u0430\u0447\u0430\u043b\u043e"),s.qZA(),s.TgZ(12,"th",3),s._uU(13,"\u041a\u043e\u043d\u0435\u0446"),s.qZA(),s.TgZ(14,"th",3),s._uU(15,"\u0421\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044c \u0441\u0435\u0441\u0441\u0438\u0438"),s.qZA(),s.TgZ(16,"th",3),s._uU(17,"\u041e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435"),s.qZA()()(),s.TgZ(18,"tbody",4),s.YNc(19,S,13,13,"tr",5),s.qZA()()()),2&e&&(s.Q6J("sortedSessions",t.sessions),s.xp6(19),s.Q6J("ngForOf",t.sessions))},dependencies:[r.sg,i,r.uU]});const f=[{path:"",component:a}];class o{}o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=s.oAB({type:o}),o.\u0275inj=s.cJS({imports:[p.N,r.ez,c.Bz.forChild(f)]})}}]);